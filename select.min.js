/*! select 0.5.1 */
(function(){var t,e,n,i,o,r,s,l,c,h,p,a,u,d,g,f,v,y,m,O,b,C,E,T=function(t,e){return function(){return t.apply(e,arguments)}},w={}.hasOwnProperty,L=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};"object"==typeof exports?(s=require("../tether/tether.min.js"),C=s.Utils,p=C.extend,c=C.addClass,v=C.removeClass,d=C.hasClass,a=C.getBounds,i=C.Evented):"function"==typeof define&&define.amd?require(["../tether/tether.min.js"],function(t){var e;return e=t.Utils,p=e.extend,c=e.addClass,v=e.removeClass,d=e.hasClass,a=e.getBounds,i=e.Evented,e}):window.Tether||(s=window.Tether,E=s.Utils,p=E.extend,c=E.addClass,v=E.removeClass,d=E.hasClass,a=E.getBounds,i=E.Evented),e=13,n=27,o=32,l=38,t=40,O="ontouchstart"in document.documentElement,h=O?"touchstart":"click",b=function(){return O&&(640>=innerWidth||640>=innerHeight)},g=function(t){return Array.prototype.reduce.call(t,function(t,e){return t===e?e:!1})},u=function(){var t;return null!=(t=document.querySelector(".select-target-focused"))?t.selectInstance:void 0},y="",m=void 0,f=void 0,document.addEventListener("keypress",function(t){var e,n,i,r;if((i=u())&&0!==t.charCode)return t.keyCode===o&&t.preventDefault(),clearTimeout(m),m=setTimeout(function(){return y=""},500),y+=String.fromCharCode(t.charCode),e=i.findOptionsByPrefix(y),1===e.length?void i.selectOption(e[0]):y.length>1&&g(y)&&(n=i.findOptionsByPrefix(y[0]),n.length)?(r=n.indexOf(i.getChosen()),r+=1,r%=n.length,void i.selectOption(n[r])):void(e.length&&i.selectOption(e[0]))}),document.addEventListener("keydown",function(i){var r,s,c;if(r=u())if(((s=i.keyCode)===l||s===t||s===n)&&i.preventDefault(),r.isOpen())switch(i.keyCode){case l:case t:return r.moveHighlight(i.keyCode);case e:return r.selectHighlightedOption();case n:return r.close(),r.target.focus()}else if((c=i.keyCode)===l||c===t||c===o)return r.open()}),r=function(t){function e(t){if(this.options=t,this.update=T(this.update,this),this.options=p({},e.defaults,this.options),this.select=this.options.el,null!=this.select.selectInstance)throw new Error("This element has already been turned into a Select");this.setupTarget(),this.renderTarget(),this.setupDrop(),this.renderDrop(),this.setupSelect(),this.setupTether(),this.bindClick(),this.bindMutationEvents(),this.value=this.select.value}return L(e,t),e.defaults={alignToHighlighed:"auto",className:"select-theme-default"},e.prototype.useNative=function(){return this.options.useNative===!0||b()&&this.options.useNative!==!1},e.prototype.setupTarget=function(){var t,e=this;return this.target=document.createElement("a"),this.target.href="javascript:;",c(this.target,"select-target"),t=this.select.getAttribute("tabindex")||0,this.target.setAttribute("tabindex",t),this.options.className&&c(this.target,this.options.className),this.target.selectInstance=this,this.target.addEventListener("click",function(){return e.isOpen()?e.target.blur():e.target.focus()}),this.target.addEventListener("focus",function(){return c(e.target,"select-target-focused")}),this.target.addEventListener("blur",function(t){return e.isOpen()&&t.relatedTarget&&!e.drop.contains(t.relatedTarget)&&e.close(),v(e.target,"select-target-focused")}),this.select.parentNode.insertBefore(this.target,this.select.nextSibling)},e.prototype.setupDrop=function(){var t=this;return this.drop=document.createElement("div"),c(this.drop,"select"),this.options.className&&c(this.drop,this.options.className),document.body.appendChild(this.drop),this.drop.addEventListener("click",function(e){return d(e.target,"select-option")&&t.pickOption(e.target),e.stopPropagation()}),this.drop.addEventListener("mousemove",function(e){return d(e.target,"select-option")?t.highlightOption(e.target):void 0}),this.content=document.createElement("div"),c(this.content,"select-content"),this.drop.appendChild(this.content)},e.prototype.open=function(){var t,e,n=this;return c(this.target,"select-open"),this.useNative()?(this.select.style.display="block",void setTimeout(function(){var t;return t=document.createEvent("MouseEvents"),t.initEvent("mousedown",!0,!0),n.select.dispatchEvent(t)})):(c(this.drop,"select-open"),setTimeout(function(){return n.tether.enable()}),(e=this.drop.querySelector(".select-option-selected"))?(this.highlightOption(e),this.scrollDropContentToOption(e),t=function(){var t,i,o;return d(n.drop,"tether-abutted-left")||d(n.drop,"tether-abutted-bottom")?(t=a(n.drop),o=a(e),i=t.top-(o.top+o.height),n.drop.style.top=(parseFloat(n.drop.style.top)||0)+i+"px"):void 0},("always"===this.options.alignToHighlighted||"auto"===this.options.alignToHighlighted&&this.content.scrollHeight<=this.content.clientHeight)&&setTimeout(t),this.trigger("open")):void 0)},e.prototype.close=function(){return v(this.target,"select-open"),this.useNative()?void(this.select.style.display="none"):(this.tether.disable(),v(this.drop,"select-open"),this.trigger("close"))},e.prototype.toggle=function(){return this.isOpen()?this.close():this.open()},e.prototype.isOpen=function(){return d(this.drop,"select-open")},e.prototype.bindClick=function(){var t=this;return this.target.addEventListener(h,function(e){return e.preventDefault(),t.toggle()}),document.addEventListener(h,function(e){return!t.isOpen()||e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)?void 0:t.close()})},e.prototype.setupTether=function(){return this.tether=new s({element:this.drop,target:this.target,attachment:"top left",targetAttachment:"bottom left",classPrefix:"select",constraints:[{to:"window",attachment:"together"}]})},e.prototype.renderTarget=function(){var t,e,n,i;for(this.target.innerHTML="",i=this.select.querySelectorAll("option"),e=0,n=i.length;n>e;e++)if(t=i[e],t.selected){this.target.innerHTML=t.innerHTML;break}return this.target.appendChild(document.createElement("b"))},e.prototype.renderDrop=function(){var t,e,n,i,o,r;for(n=document.createElement("ul"),c(n,"select-options"),r=this.select.querySelectorAll("option"),i=0,o=r.length;o>i;i++)t=r[i],e=document.createElement("li"),c(e,"select-option"),e.setAttribute("data-value",t.value),e.innerHTML=t.innerHTML,t.selected&&c(e,"select-option-selected"),n.appendChild(e);return this.content.innerHTML="",this.content.appendChild(n)},e.prototype.update=function(){return this.renderDrop(),this.renderTarget()},e.prototype.setupSelect=function(){return this.select.selectInstance=this,c(this.select,"select-select"),this.select.addEventListener("change",this.update)},e.prototype.bindMutationEvents=function(){return null!=window.MutationObserver?(this.observer=new MutationObserver(this.update),this.observer.observe(this.select,{childList:!0,attributes:!0,characterData:!0,subtree:!0})):this.select.addEventListener("DOMSubtreeModified",this.update)},e.prototype.findOptionsByPrefix=function(t){var e;return e=this.drop.querySelectorAll(".select-option"),t=t.toLowerCase(),Array.prototype.filter.call(e,function(e){return e.innerHTML.toLowerCase().substr(0,t.length)===t})},e.prototype.findOptionsByValue=function(t){var e;return e=this.drop.querySelectorAll(".select-option"),Array.prototype.filter.call(e,function(e){return e.getAttribute("data-value")===t})},e.prototype.getChosen=function(){return this.drop.querySelector(this.isOpen()?".select-option-highlight":".select-option-selected")},e.prototype.selectOption=function(t){return this.isOpen()?(this.highlightOption(t),this.scrollDropContentToOption(t)):this.pickOption(t,!1)},e.prototype.resetSelection=function(){return this.selectOption(this.drop.querySelector(".select-option"))},e.prototype.highlightOption=function(t){var e;return e=this.drop.querySelector(".select-option-highlight"),null!=e&&v(e,"select-option-highlight"),c(t,"select-option-highlight"),this.trigger("highlight",{option:t})},e.prototype.moveHighlight=function(t){var e,n,i,o;return(e=this.drop.querySelector(".select-option-highlight"))?(o=this.drop.querySelectorAll(".select-option"),n=Array.prototype.indexOf.call(o,e),n>=0&&(t===l?n-=1:n+=1,!(0>n||n>=o.length))?(i=o[n],this.highlightOption(i),this.scrollDropContentToOption(i)):void 0):void this.highlightOption(this.drop.querySelector(".select-option"))},e.prototype.scrollDropContentToOption=function(t){var e,n;return this.content.scrollHeight>this.content.clientHeight?(e=a(this.content),n=a(t),this.content.scrollTop=n.top-(e.top-this.content.scrollTop)):void 0},e.prototype.selectHighlightedOption=function(){return this.pickOption(this.drop.querySelector(".select-option-highlight"))},e.prototype.pickOption=function(t,e){var n=this;return null==e&&(e=!0),this.value=this.select.value=t.getAttribute("data-value"),this.triggerChange(),e?setTimeout(function(){return n.close(),n.target.focus()}):void 0},e.prototype.triggerChange=function(){var t;return t=document.createEvent("HTMLEvents"),t.initEvent("change",!0,!1),this.select.dispatchEvent(t),this.trigger("change",{value:this.select.value})},e.prototype.change=function(t){var e;if(e=this.findOptionsByValue(t),!e.length)throw new Error('Select Error: An option with the value "'+t+"\" doesn't exist");return this.pickOption(e[0],!1)},e}(i),r.init=function(t){var e,n,i,o,s;if(null==t&&(t={}),"loading"===document.readyState)return void document.addEventListener("DOMContentLoaded",function(){return r.init(t)});for(null==t.selector&&(t.selector="select"),o=document.querySelectorAll(t.selector),s=[],n=0,i=o.length;i>n;n++)e=o[n],s.push(e.selectInstance?void 0:new r(p({el:e},t)));return s},function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.returnExports=e()}(this,function(){return r})}).call(this);